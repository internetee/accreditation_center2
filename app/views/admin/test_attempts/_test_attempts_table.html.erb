<table class="table">
  <thead>
    <tr>
      <th><%= t('.user') %></th>
      <th><%= t('.started_at') %></th>
      <th><%= t('.completed_at') %></th>
      <th><%= t('.duration') %></th>
      <th><%= t('.score') %></th>
      <th><%= t('.status') %></th>
      <th class="table--action"></th>
    </tr>
  </thead>
  <tbody>
    <% @test_attempts.each do |attempt| %>
      <tr>
        <td>
          <div class="user-info">
            <span class="user-name"><%= attempt.user.name || attempt.user.email %></span>
            <span class="user-email"><%= attempt.user.email %></span>
          </div>
        </td>
        <td><%= l(attempt.started_at, format: :short) if attempt.started_at %></td>
        <td><%= l(attempt.completed_at, format: :short) if attempt.completed_at %></td>
        <td>
          <% if attempt.completed? && attempt.started_at %>
            <%= distance_of_time_in_words(attempt.started_at, attempt.completed_at) %>
          <% elsif attempt.started_at %>
            <%= t('.in_progress') %>
          <% else %>
            <%= t('.not_started') %>
          <% end %>
        </td>
        <td>
          <% if attempt.completed? %>
            <span class="score-value"><%= number_to_percentage(attempt.score_percentage, precision: 1) %></span>
          <% else %>
            <%= t('.in_progress') %>
          <% end %>
        </td>
        <td>
          <% if attempt.passed? %>
            <span class="badge badge-success"><%= t('.passed') %></span>
          <% elsif attempt.failed? %>
            <span class="badge badge-danger"><%= t('.failed') %></span>
          <% else %>
            <span class="badge badge-warning"><%= t('.in_progress') %></span>
          <% end %>
        </td>
        <td class="table--action">
          <%= icon_link_to 'fas fa-eye', admin_test_test_attempt_path(@test, attempt), class: 'simple_tooltip', data: { 'tippy-content': t(:view) } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>